<!DOCTYPE html>
<html><head>
<meta charset="UTF-8">
<title>Delivery Visualization</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;padding:20px}.container{max-width:1400px;margin:0 auto;background:white;border-radius:15px;box-shadow:0 20px 60px rgba(0,0,0,0.3);padding:30px}h1{color:#333;text-align:center;margin-bottom:30px;font-size:2.5em}h1 i{color:#667eea;margin-right:15px}.controls{display:flex;justify-content:center;gap:15px;margin-bottom:30px;flex-wrap:wrap;align-items:center}.btn{padding:12px 24px;border:none;border-radius:8px;font-size:16px;cursor:pointer;transition:all 0.3s ease;font-weight:600;box-shadow:0 4px 6px rgba(0,0,0,0.1)}.btn:hover{transform:translateY(-2px);box-shadow:0 6px 12px rgba(0,0,0,0.15)}.btn-primary{background:#667eea;color:white}.btn-success{background:#10b981;color:white}.btn-warning{background:#f59e0b;color:white}.btn-secondary{background:#6b7280;color:white}.speed-control{display:flex;align-items:center;gap:10px;background:#f3f4f6;padding:8px 16px;border-radius:8px}.main-content{display:grid;grid-template-columns:1fr 400px;gap:30px}.grid-container{background:#f9fafb;padding:20px;border-radius:10px;overflow:auto;position:relative}.grid{display:grid;grid-template-columns:repeat(10,60px);grid-template-rows:repeat(7,60px);gap:2px;margin:0 auto;width:fit-content;position:relative}.cell{width:60px;height:60px;border:2px solid #d1d5db;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:24px;background:white;transition:all 0.3s ease;position:relative}.cell:hover{transform:scale(1.05);z-index:10}.cell.store{background:linear-gradient(135deg,#3b82f6,#2563eb);color:white;box-shadow:0 4px 6px rgba(59,130,246,0.3)}.cell.customer{background:linear-gradient(135deg,#10b981,#059669);color:white;box-shadow:0 4px 6px rgba(16,185,129,0.3)}.cell.tunnel{background:linear-gradient(135deg,#6b7280,#4b5563);color:white}.cell.blocked{background:linear-gradient(135deg,#ef4444,#dc2626);color:white}.cell.truck{background:linear-gradient(135deg,#fbbf24,#f59e0b);color:white;animation:pulse 1s infinite;box-shadow:0 0 20px rgba(251,191,36,0.6)}@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.1)}}.tunnel-number{position:absolute;bottom:2px;right:2px;background:#ef4444;color:white;font-size:10px;padding:1px 3px;border-radius:50%;font-weight:bold}.edge-overlay{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.edge-h{stroke:#ccc;stroke-width:2;marker-end:url(#arrowhead)}.edge-blocked{stroke:#ef4444;stroke-dasharray:5,5}.edge-label{position:absolute;font-size:10px;font-weight:bold;background:rgba(255,255,255,0.8);padding:1px 3px;border-radius:3px;pointer-events:none}.cell-number{position:absolute;top:2px;right:4px;font-size:12px;font-weight:bold;background:rgba(255,255,255,0.9);color:#333;padding:2px 6px;border-radius:4px}.results-panel{background:#f9fafb;padding:20px;border-radius:10px;max-height:800px;overflow-y:auto}.results-panel h2,.results-panel h3{color:#333;margin-bottom:15px;font-size:1.3em}#pathSelector{background:#f3f4f6;padding:15px;border-radius:8px;margin-bottom:20px;max-height:200px;overflow-y:auto}.path-btn{display:block;width:100%;margin-bottom:8px;padding:10px;border:none;background:#e5e7eb;border-radius:6px;cursor:pointer;text-align:left;transition:background 0.2s}.path-btn:hover{background:#d1d5db}.path-btn.selected{background:#10b981;color:white}#results{background:white;padding:15px;border-radius:8px;font-family:'Courier New',monospace;font-size:14px;line-height:1.6;margin-bottom:20px;box-shadow:0 2px 4px rgba(0,0,0,0.1)}.store-assignment{margin-bottom:15px;padding:10px;background:#f3f4f6;border-radius:6px;border-left:4px solid #667eea}.store-assignment strong{color:#667eea;font-size:16px}.route-info{margin-left:15px;margin-top:8px;color:#6b7280}.total-cost{font-size:18px;font-weight:bold;color:#10b981;margin-top:15px;padding:10px;background:#d1fae5;border-radius:6px;text-align:center}.legend{margin-top:20px}.legend h3{margin-bottom:10px;color:#333}.legend-item{display:flex;align-items:center;margin-bottom:8px;gap:10px}.legend-box{width:40px;height:40px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:18px}.edge-label.legend-box{background:#667eea;color:white;font-size:12px}@media (max-width:1200px){.main-content{grid-template-columns:1fr}.grid-container svg{transform:scale(0.8)}}</style>
</head>
<body>
<div class="container">
<h1><i class="fas fa-truck"></i> Delivery Route Visualization</h1>
<div class="controls">
<button id="nextBtn" class="btn btn-primary"><i class="fas fa-step-forward"></i> Next Step</button>
<button id="playBtn" class="btn btn-success"><i class="fas fa-play"></i> Play Selected Path</button>
<button id="pauseBtn" class="btn btn-warning" style="display:none;"><i class="fas fa-pause"></i> Pause</button>
<button id="resetBtn" class="btn btn-secondary"><i class="fas fa-redo"></i> Reset</button>
<span class="speed-control"><label>Speed: </label>
<input type="range" id="speedSlider" min="200" max="2000" value="1000" step="200">
<span id="speedValue">1000ms</span></span>
</div>
<div class="main-content">
<div class="grid-container">
<div class="grid" id="grid">
<div class="cell" data-x="0" data-y="0" data-type="customer"><i class="fas fa-home"></i><span class="cell-number">9</span></div>
<div class="cell" data-x="1" data-y="0"></div>
<div class="cell" data-x="2" data-y="0" data-type="customer"><i class="fas fa-home"></i><span class="cell-number">2</span></div>
<div class="cell" data-x="3" data-y="0"></div>
<div class="cell" data-x="4" data-y="0"></div>
<div class="cell" data-x="5" data-y="0"></div>
<div class="cell" data-x="6" data-y="0"></div>
<div class="cell" data-x="7" data-y="0"></div>
<div class="cell" data-x="8" data-y="0"></div>
<div class="cell" data-x="9" data-y="0"></div>
<div class="cell" data-x="0" data-y="1"></div>
<div class="cell" data-x="1" data-y="1" data-type="customer"><i class="fas fa-home"></i><span class="cell-number">7</span></div>
<div class="cell" data-x="2" data-y="1"></div>
<div class="cell" data-x="3" data-y="1"></div>
<div class="cell" data-x="4" data-y="1"></div>
<div class="cell" data-x="5" data-y="1"></div>
<div class="cell" data-x="6" data-y="1" data-type="tunnel" data-tunnel-id="52"><i class="fas fa-subway"></i><span class="tunnel-number">52</span></div>
<div class="cell" data-x="7" data-y="1"></div>
<div class="cell" data-x="8" data-y="1"></div>
<div class="cell" data-x="9" data-y="1"></div>
<div class="cell" data-x="0" data-y="2"></div>
<div class="cell" data-x="1" data-y="2"></div>
<div class="cell" data-x="2" data-y="2"></div>
<div class="cell" data-x="3" data-y="2" data-type="customer"><i class="fas fa-home"></i><span class="cell-number">6</span></div>
<div class="cell" data-x="4" data-y="2"></div>
<div class="cell" data-x="5" data-y="2"></div>
<div class="cell" data-x="6" data-y="2"></div>
<div class="cell" data-x="7" data-y="2" data-type="customer"><i class="fas fa-home"></i><span class="cell-number">8</span></div>
<div class="cell" data-x="8" data-y="2"></div>
<div class="cell" data-x="9" data-y="2" data-type="tunnel" data-tunnel-id="3"><i class="fas fa-subway"></i><span class="tunnel-number">3</span></div>
<div class="cell" data-x="0" data-y="3" data-type="tunnel" data-tunnel-id="19"><i class="fas fa-subway"></i><span class="tunnel-number">19</span></div>
<div class="cell" data-x="1" data-y="3" data-type="tunnel" data-tunnel-id="52"><i class="fas fa-subway"></i><span class="tunnel-number">52</span></div>
<div class="cell" data-x="2" data-y="3" data-type="customer"><i class="fas fa-home"></i><span class="cell-number">3</span></div>
<div class="cell" data-x="3" data-y="3"></div>
<div class="cell" data-x="4" data-y="3"></div>
<div class="cell" data-x="5" data-y="3"></div>
<div class="cell" data-x="6" data-y="3" data-type="tunnel" data-tunnel-id="24"><i class="fas fa-subway"></i><span class="tunnel-number">24</span></div>
<div class="cell" data-x="7" data-y="3" data-type="store"><i class="fas fa-store"></i><span class="cell-number">1</span></div>
<div class="cell" data-x="8" data-y="3" data-type="tunnel" data-tunnel-id="3"><i class="fas fa-subway"></i><span class="tunnel-number">3</span></div>
<div class="cell" data-x="9" data-y="3"></div>
<div class="cell" data-x="0" data-y="4"></div>
<div class="cell" data-x="1" data-y="4"></div>
<div class="cell" data-x="2" data-y="4"></div>
<div class="cell" data-x="3" data-y="4"></div>
<div class="cell" data-x="4" data-y="4"></div>
<div class="cell" data-x="5" data-y="4"></div>
<div class="cell" data-x="6" data-y="4"></div>
<div class="cell" data-x="7" data-y="4"></div>
<div class="cell" data-x="8" data-y="4"></div>
<div class="cell" data-x="9" data-y="4"></div>
<div class="cell" data-x="0" data-y="5"></div>
<div class="cell" data-x="1" data-y="5" data-type="customer"><i class="fas fa-home"></i><span class="cell-number">1</span></div>
<div class="cell" data-x="2" data-y="5"></div>
<div class="cell" data-x="3" data-y="5"></div>
<div class="cell" data-x="4" data-y="5"></div>
<div class="cell" data-x="5" data-y="5"></div>
<div class="cell" data-x="6" data-y="5"></div>
<div class="cell" data-x="7" data-y="5"></div>
<div class="cell" data-x="8" data-y="5"></div>
<div class="cell" data-x="9" data-y="5"></div>
<div class="cell" data-x="0" data-y="6"></div>
<div class="cell" data-x="1" data-y="6"></div>
<div class="cell" data-x="2" data-y="6" data-type="tunnel" data-tunnel-id="24"><i class="fas fa-subway"></i><span class="tunnel-number">24</span></div>
<div class="cell" data-x="3" data-y="6" data-type="customer"><i class="fas fa-home"></i><span class="cell-number">4</span></div>
<div class="cell" data-x="4" data-y="6"></div>
<div class="cell" data-x="5" data-y="6"></div>
<div class="cell" data-x="6" data-y="6" data-type="customer"><i class="fas fa-home"></i><span class="cell-number">5</span></div>
<div class="cell" data-x="7" data-y="6"></div>
<div class="cell" data-x="8" data-y="6"></div>
<div class="cell" data-x="9" data-y="6" data-type="tunnel" data-tunnel-id="19"><i class="fas fa-subway"></i><span class="tunnel-number">19</span></div>
<svg class="edge-overlay" width="620" height="434">
<defs><marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#ccc" /></marker></defs>
<line x1="62" y1="31" x2="124" y2="31" class="edge-h" />
<text x="62" y="36" class="edge-label" text-anchor="middle">1</text>
<line x1="124" y1="31" x2="186" y2="31" class="edge-h" />
<text x="124" y="36" class="edge-label" text-anchor="middle">1</text>
<line x1="186" y1="31" x2="248" y2="31" class="edge-h" />
<text x="186" y="36" class="edge-label" text-anchor="middle">1</text>
<line x1="248" y1="31" x2="310" y2="31" class="edge-h" />
<text x="248" y="36" class="edge-label" text-anchor="middle">1</text>
<line x1="310" y1="31" x2="372" y2="31" class="edge-h" />
<text x="310" y="36" class="edge-label" text-anchor="middle">1</text>
<line x1="372" y1="31" x2="434" y2="31" class="edge-h" />
<text x="372" y="36" class="edge-label" text-anchor="middle">1</text>
<line x1="434" y1="31" x2="496" y2="31" class="edge-h" />
<text x="434" y="36" class="edge-label" text-anchor="middle">1</text>
<line x1="496" y1="31" x2="558" y2="31" class="edge-h" />
<text x="496" y="36" class="edge-label" text-anchor="middle">1</text>
<line x1="558" y1="31" x2="620" y2="31" class="edge-h" />
<text x="558" y="36" class="edge-label" text-anchor="middle">1</text>
<line x1="62" y1="93" x2="124" y2="93" class="edge-h" />
<text x="62" y="98" class="edge-label" text-anchor="middle">1</text>
<line x1="124" y1="93" x2="186" y2="93" class="edge-h" />
<text x="124" y="98" class="edge-label" text-anchor="middle">1</text>
<line x1="186" y1="93" x2="248" y2="93" class="edge-h" />
<text x="186" y="98" class="edge-label" text-anchor="middle">1</text>
<line x1="248" y1="93" x2="310" y2="93" class="edge-h" />
<text x="248" y="98" class="edge-label" text-anchor="middle">1</text>
<line x1="310" y1="93" x2="372" y2="93" class="edge-h" />
<text x="310" y="98" class="edge-label" text-anchor="middle">1</text>
<line x1="372" y1="93" x2="434" y2="93" class="edge-h" />
<text x="372" y="98" class="edge-label" text-anchor="middle">1</text>
<line x1="434" y1="93" x2="496" y2="93" class="edge-h" />
<text x="434" y="98" class="edge-label" text-anchor="middle">1</text>
<line x1="496" y1="93" x2="558" y2="93" class="edge-h" />
<text x="496" y="98" class="edge-label" text-anchor="middle">1</text>
<line x1="558" y1="93" x2="620" y2="93" class="edge-h" />
<text x="558" y="98" class="edge-label" text-anchor="middle">1</text>
<line x1="62" y1="155" x2="124" y2="155" class="edge-h" />
<text x="62" y="160" class="edge-label" text-anchor="middle">1</text>
<line x1="124" y1="155" x2="186" y2="155" class="edge-h" />
<text x="124" y="160" class="edge-label" text-anchor="middle">1</text>
<line x1="186" y1="155" x2="248" y2="155" class="edge-h" />
<text x="186" y="160" class="edge-label" text-anchor="middle">1</text>
<line x1="248" y1="155" x2="310" y2="155" class="edge-h" />
<text x="248" y="160" class="edge-label" text-anchor="middle">1</text>
<line x1="310" y1="155" x2="372" y2="155" class="edge-h" />
<text x="310" y="160" class="edge-label" text-anchor="middle">1</text>
<line x1="372" y1="155" x2="434" y2="155" class="edge-h" />
<text x="372" y="160" class="edge-label" text-anchor="middle">1</text>
<line x1="434" y1="155" x2="496" y2="155" class="edge-h" />
<text x="434" y="160" class="edge-label" text-anchor="middle">1</text>
<line x1="496" y1="155" x2="558" y2="155" class="edge-h" />
<text x="496" y="160" class="edge-label" text-anchor="middle">1</text>
<line x1="558" y1="155" x2="620" y2="155" class="edge-h" />
<text x="558" y="160" class="edge-label" text-anchor="middle">1</text>
<line x1="62" y1="217" x2="124" y2="217" class="edge-h" />
<text x="62" y="222" class="edge-label" text-anchor="middle">1</text>
<line x1="124" y1="217" x2="186" y2="217" class="edge-h" />
<text x="124" y="222" class="edge-label" text-anchor="middle">1</text>
<line x1="186" y1="217" x2="248" y2="217" class="edge-h" />
<text x="186" y="222" class="edge-label" text-anchor="middle">1</text>
<line x1="248" y1="217" x2="310" y2="217" class="edge-h" />
<text x="248" y="222" class="edge-label" text-anchor="middle">1</text>
<line x1="310" y1="217" x2="372" y2="217" class="edge-h" />
<text x="310" y="222" class="edge-label" text-anchor="middle">1</text>
<line x1="372" y1="217" x2="434" y2="217" class="edge-h" />
<text x="372" y="222" class="edge-label" text-anchor="middle">1</text>
<line x1="434" y1="217" x2="496" y2="217" class="edge-h" />
<text x="434" y="222" class="edge-label" text-anchor="middle">1</text>
<line x1="496" y1="217" x2="558" y2="217" class="edge-h" />
<text x="496" y="222" class="edge-label" text-anchor="middle">1</text>
<line x1="558" y1="217" x2="620" y2="217" class="edge-h" />
<text x="558" y="222" class="edge-label" text-anchor="middle">1</text>
<line x1="62" y1="279" x2="124" y2="279" class="edge-h" />
<text x="62" y="284" class="edge-label" text-anchor="middle">1</text>
<line x1="124" y1="279" x2="186" y2="279" class="edge-h" />
<text x="124" y="284" class="edge-label" text-anchor="middle">1</text>
<line x1="186" y1="279" x2="248" y2="279" class="edge-h" />
<text x="186" y="284" class="edge-label" text-anchor="middle">1</text>
<line x1="248" y1="279" x2="310" y2="279" class="edge-h" />
<text x="248" y="284" class="edge-label" text-anchor="middle">1</text>
<line x1="310" y1="279" x2="372" y2="279" class="edge-h" />
<text x="310" y="284" class="edge-label" text-anchor="middle">1</text>
<line x1="372" y1="279" x2="434" y2="279" class="edge-h" />
<text x="372" y="284" class="edge-label" text-anchor="middle">1</text>
<line x1="434" y1="279" x2="496" y2="279" class="edge-h" />
<text x="434" y="284" class="edge-label" text-anchor="middle">1</text>
<line x1="496" y1="279" x2="558" y2="279" class="edge-h" />
<text x="496" y="284" class="edge-label" text-anchor="middle">1</text>
<line x1="558" y1="279" x2="620" y2="279" class="edge-h" />
<text x="558" y="284" class="edge-label" text-anchor="middle">1</text>
<line x1="62" y1="341" x2="124" y2="341" class="edge-h" />
<text x="62" y="346" class="edge-label" text-anchor="middle">1</text>
<line x1="124" y1="341" x2="186" y2="341" class="edge-h" />
<text x="124" y="346" class="edge-label" text-anchor="middle">1</text>
<line x1="186" y1="341" x2="248" y2="341" class="edge-h" />
<text x="186" y="346" class="edge-label" text-anchor="middle">1</text>
<line x1="248" y1="341" x2="310" y2="341" class="edge-h" />
<text x="248" y="346" class="edge-label" text-anchor="middle">1</text>
<line x1="310" y1="341" x2="372" y2="341" class="edge-h" />
<text x="310" y="346" class="edge-label" text-anchor="middle">1</text>
<line x1="372" y1="341" x2="434" y2="341" class="edge-h" />
<text x="372" y="346" class="edge-label" text-anchor="middle">1</text>
<line x1="434" y1="341" x2="496" y2="341" class="edge-h" />
<text x="434" y="346" class="edge-label" text-anchor="middle">1</text>
<line x1="496" y1="341" x2="558" y2="341" class="edge-h" />
<text x="496" y="346" class="edge-label" text-anchor="middle">1</text>
<line x1="558" y1="341" x2="620" y2="341" class="edge-h" />
<text x="558" y="346" class="edge-label" text-anchor="middle">1</text>
<line x1="62" y1="403" x2="124" y2="403" class="edge-h" />
<text x="62" y="408" class="edge-label" text-anchor="middle">1</text>
<line x1="124" y1="403" x2="186" y2="403" class="edge-h" />
<text x="124" y="408" class="edge-label" text-anchor="middle">1</text>
<line x1="186" y1="403" x2="248" y2="403" class="edge-h" />
<text x="186" y="408" class="edge-label" text-anchor="middle">1</text>
<line x1="248" y1="403" x2="310" y2="403" class="edge-h" />
<text x="248" y="408" class="edge-label" text-anchor="middle">1</text>
<line x1="310" y1="403" x2="372" y2="403" class="edge-h" />
<text x="310" y="408" class="edge-label" text-anchor="middle">1</text>
<line x1="372" y1="403" x2="434" y2="403" class="edge-h" />
<text x="372" y="408" class="edge-label" text-anchor="middle">1</text>
<line x1="434" y1="403" x2="496" y2="403" class="edge-h" />
<text x="434" y="408" class="edge-label" text-anchor="middle">1</text>
<line x1="496" y1="403" x2="558" y2="403" class="edge-h" />
<text x="496" y="408" class="edge-label" text-anchor="middle">1</text>
<line x1="558" y1="403" x2="620" y2="403" class="edge-h" />
<text x="558" y="408" class="edge-label" text-anchor="middle">1</text>
<line x1="31" y1="62" x2="31" y2="124" class="edge-h" />
<text x="36" y="62" class="edge-label" text-anchor="middle">1</text>
<line x1="31" y1="124" x2="31" y2="186" class="edge-h" />
<text x="36" y="124" class="edge-label" text-anchor="middle">1</text>
<line x1="31" y1="186" x2="31" y2="248" class="edge-h" />
<text x="36" y="186" class="edge-label" text-anchor="middle">1</text>
<line x1="31" y1="248" x2="31" y2="310" class="edge-h" />
<text x="36" y="248" class="edge-label" text-anchor="middle">1</text>
<line x1="31" y1="310" x2="31" y2="372" class="edge-h" />
<text x="36" y="310" class="edge-label" text-anchor="middle">1</text>
<line x1="31" y1="372" x2="31" y2="434" class="edge-h" />
<text x="36" y="372" class="edge-label" text-anchor="middle">1</text>
<line x1="93" y1="62" x2="93" y2="124" class="edge-h" />
<text x="98" y="62" class="edge-label" text-anchor="middle">1</text>
<line x1="93" y1="124" x2="93" y2="186" class="edge-h" />
<text x="98" y="124" class="edge-label" text-anchor="middle">1</text>
<line x1="93" y1="186" x2="93" y2="248" class="edge-h" />
<text x="98" y="186" class="edge-label" text-anchor="middle">1</text>
<line x1="93" y1="248" x2="93" y2="310" class="edge-h" />
<text x="98" y="248" class="edge-label" text-anchor="middle">1</text>
<line x1="93" y1="310" x2="93" y2="372" class="edge-h" />
<text x="98" y="310" class="edge-label" text-anchor="middle">1</text>
<line x1="93" y1="372" x2="93" y2="434" class="edge-h" />
<text x="98" y="372" class="edge-label" text-anchor="middle">1</text>
<line x1="155" y1="62" x2="155" y2="124" class="edge-h" />
<text x="160" y="62" class="edge-label" text-anchor="middle">1</text>
<line x1="155" y1="124" x2="155" y2="186" class="edge-h" />
<text x="160" y="124" class="edge-label" text-anchor="middle">1</text>
<line x1="155" y1="186" x2="155" y2="248" class="edge-h" />
<text x="160" y="186" class="edge-label" text-anchor="middle">1</text>
<line x1="155" y1="248" x2="155" y2="310" class="edge-h" />
<text x="160" y="248" class="edge-label" text-anchor="middle">1</text>
<line x1="155" y1="310" x2="155" y2="372" class="edge-h" />
<text x="160" y="310" class="edge-label" text-anchor="middle">1</text>
<line x1="155" y1="372" x2="155" y2="434" class="edge-h" />
<text x="160" y="372" class="edge-label" text-anchor="middle">1</text>
<line x1="217" y1="62" x2="217" y2="124" class="edge-h" />
<text x="222" y="62" class="edge-label" text-anchor="middle">1</text>
<line x1="217" y1="124" x2="217" y2="186" class="edge-h" />
<text x="222" y="124" class="edge-label" text-anchor="middle">1</text>
<line x1="217" y1="186" x2="217" y2="248" class="edge-h" />
<text x="222" y="186" class="edge-label" text-anchor="middle">1</text>
<line x1="217" y1="248" x2="217" y2="310" class="edge-h" />
<text x="222" y="248" class="edge-label" text-anchor="middle">1</text>
<line x1="217" y1="310" x2="217" y2="372" class="edge-h" />
<text x="222" y="310" class="edge-label" text-anchor="middle">1</text>
<line x1="217" y1="372" x2="217" y2="434" class="edge-h" />
<text x="222" y="372" class="edge-label" text-anchor="middle">1</text>
<line x1="279" y1="62" x2="279" y2="124" class="edge-h" />
<text x="284" y="62" class="edge-label" text-anchor="middle">1</text>
<line x1="279" y1="124" x2="279" y2="186" class="edge-h" />
<text x="284" y="124" class="edge-label" text-anchor="middle">1</text>
<line x1="279" y1="186" x2="279" y2="248" class="edge-h" />
<text x="284" y="186" class="edge-label" text-anchor="middle">1</text>
<line x1="279" y1="248" x2="279" y2="310" class="edge-h" />
<text x="284" y="248" class="edge-label" text-anchor="middle">1</text>
<line x1="279" y1="310" x2="279" y2="372" class="edge-h" />
<text x="284" y="310" class="edge-label" text-anchor="middle">1</text>
<line x1="279" y1="372" x2="279" y2="434" class="edge-h" />
<text x="284" y="372" class="edge-label" text-anchor="middle">1</text>
<line x1="341" y1="62" x2="341" y2="124" class="edge-h" />
<text x="346" y="62" class="edge-label" text-anchor="middle">1</text>
<line x1="341" y1="124" x2="341" y2="186" class="edge-h" />
<text x="346" y="124" class="edge-label" text-anchor="middle">1</text>
<line x1="341" y1="186" x2="341" y2="248" class="edge-h" />
<text x="346" y="186" class="edge-label" text-anchor="middle">1</text>
<line x1="341" y1="248" x2="341" y2="310" class="edge-h" />
<text x="346" y="248" class="edge-label" text-anchor="middle">1</text>
<line x1="341" y1="310" x2="341" y2="372" class="edge-h" />
<text x="346" y="310" class="edge-label" text-anchor="middle">1</text>
<line x1="341" y1="372" x2="341" y2="434" class="edge-h" />
<text x="346" y="372" class="edge-label" text-anchor="middle">1</text>
<line x1="403" y1="62" x2="403" y2="124" class="edge-h" />
<text x="408" y="62" class="edge-label" text-anchor="middle">1</text>
<line x1="403" y1="124" x2="403" y2="186" class="edge-h" />
<text x="408" y="124" class="edge-label" text-anchor="middle">1</text>
<line x1="403" y1="186" x2="403" y2="248" class="edge-h" />
<text x="408" y="186" class="edge-label" text-anchor="middle">1</text>
<line x1="403" y1="248" x2="403" y2="310" class="edge-h" />
<text x="408" y="248" class="edge-label" text-anchor="middle">1</text>
<line x1="403" y1="310" x2="403" y2="372" class="edge-h" />
<text x="408" y="310" class="edge-label" text-anchor="middle">1</text>
<line x1="403" y1="372" x2="403" y2="434" class="edge-h" />
<text x="408" y="372" class="edge-label" text-anchor="middle">1</text>
<line x1="465" y1="62" x2="465" y2="124" class="edge-h" />
<text x="470" y="62" class="edge-label" text-anchor="middle">1</text>
<line x1="465" y1="124" x2="465" y2="186" class="edge-h" />
<text x="470" y="124" class="edge-label" text-anchor="middle">1</text>
<line x1="465" y1="186" x2="465" y2="248" class="edge-h" />
<text x="470" y="186" class="edge-label" text-anchor="middle">1</text>
<line x1="465" y1="248" x2="465" y2="310" class="edge-h" />
<text x="470" y="248" class="edge-label" text-anchor="middle">1</text>
<line x1="465" y1="310" x2="465" y2="372" class="edge-h" />
<text x="470" y="310" class="edge-label" text-anchor="middle">1</text>
<line x1="465" y1="372" x2="465" y2="434" class="edge-h" />
<text x="470" y="372" class="edge-label" text-anchor="middle">1</text>
<line x1="527" y1="62" x2="527" y2="124" class="edge-h" />
<text x="532" y="62" class="edge-label" text-anchor="middle">1</text>
<line x1="527" y1="124" x2="527" y2="186" class="edge-h" />
<text x="532" y="124" class="edge-label" text-anchor="middle">1</text>
<line x1="527" y1="186" x2="527" y2="248" class="edge-h" />
<text x="532" y="186" class="edge-label" text-anchor="middle">1</text>
<line x1="527" y1="248" x2="527" y2="310" class="edge-h" />
<text x="532" y="248" class="edge-label" text-anchor="middle">1</text>
<line x1="527" y1="310" x2="527" y2="372" class="edge-h" />
<text x="532" y="310" class="edge-label" text-anchor="middle">1</text>
<line x1="527" y1="372" x2="527" y2="434" class="edge-h" />
<text x="532" y="372" class="edge-label" text-anchor="middle">1</text>
<line x1="589" y1="62" x2="589" y2="124" class="edge-h" />
<text x="594" y="62" class="edge-label" text-anchor="middle">1</text>
<line x1="589" y1="124" x2="589" y2="186" class="edge-h" />
<text x="594" y="124" class="edge-label" text-anchor="middle">1</text>
<line x1="589" y1="186" x2="589" y2="248" class="edge-h" />
<text x="594" y="186" class="edge-label" text-anchor="middle">1</text>
<line x1="589" y1="248" x2="589" y2="310" class="edge-h" />
<text x="594" y="248" class="edge-label" text-anchor="middle">1</text>
<line x1="589" y1="310" x2="589" y2="372" class="edge-h" />
<text x="594" y="310" class="edge-label" text-anchor="middle">1</text>
<line x1="589" y1="372" x2="589" y2="434" class="edge-h" />
<text x="594" y="372" class="edge-label" text-anchor="middle">1</text>
</svg>
</div>
</div>
<div class="results-panel">
<h2>Select Path to Animate</h2>
<div id="pathSelector">
<button class="path-btn" data-route-id="0-0">Store 1 → Customer 1 (Cost: 44)</button>
<button class="path-btn" data-route-id="0-1">Store 1 → Customer 2 (Cost: 38)</button>
<button class="path-btn" data-route-id="0-2">Store 1 → Customer 3 (Cost: 35)</button>
<button class="path-btn" data-route-id="0-3">Store 1 → Customer 4 (Cost: 31)</button>
<button class="path-btn" data-route-id="0-4">Store 1 → Customer 5 (Cost: 4)</button>
<button class="path-btn" data-route-id="0-5">Store 1 → Customer 6 (Cost: 27)</button>
<button class="path-btn" data-route-id="0-6">Store 1 → Customer 7 (Cost: 40)</button>
<button class="path-btn" data-route-id="0-7">Store 1 → Customer 8 (Cost: 71)</button>
<button class="path-btn" data-route-id="0-8">Store 1 → Customer 9 (Cost: 52)</button>
</div>
<h3>Search Results</h3>
<div id="results">
<div class="store-assignment"><strong>Store 1 → Customers [0, 1, 2, 3, 4, 5, 6, 7, 8]</strong>
<div class="route-info">Customer 1: Cost = 44 | Path: up,up,up,left,down,down,down,down,down,down,left,u...</div>
<div class="route-info">Customer 2: Cost = 38 | Path: up,up,up,left,down,down,down,down,down,down,left,u...</div>
<div class="route-info">Customer 3: Cost = 35 | Path: up,up,up,left,down,down,down,down,down,down,left,u...</div>
<div class="route-info">Customer 4: Cost = 31 | Path: up,up,up,left,down,down,down,down,down,down,left,u...</div>
<div class="route-info">Customer 5: Cost = 4 | Path: up,up,up,left,|RETURN|,...</div>
<div class="route-info">Customer 6: Cost = 27 | Path: up,up,up,left,down,down,down,down,down,down,left,u...</div>
<div class="route-info">Customer 7: Cost = 40 | Path: up,up,up,left,down,down,down,down,down,down,left,u...</div>
<div class="route-info">Customer 8: Cost = 71 | Path: up,up,up,left,down,down,down,down,down,down,left,u...</div>
<div class="route-info">Customer 9: Cost = 52 | Path: up,up,up,left,down,down,down,down,down,down,left,u...</div>
<div class="route-info" style="color:#10b981;font-weight:bold;">Store Total: 342</div></div>
<div class="total-cost">Total Cost: 342</div>
</div>
<div class="legend"><h3>Legend</h3>
<div class="legend-item"><span class="legend-box store"><i class="fas fa-store"></i></span> Store</div>
<div class="legend-item"><span class="legend-box customer"><i class="fas fa-home"></i></span> Customer</div>
<div class="legend-item"><span class="legend-box tunnel"><i class="fas fa-subway"></i> 1</span> Tunnel Entrance (numbered)</div>
<div class="legend-item"><span class="legend-box blocked"><i class="fas fa-ban"></i></span> Blocked Road</div>
<div class="legend-item"><span class="legend-box truck"><i class="fas fa-truck"></i></span> Truck Path</div>
<div class="legend-item"><span class="legend-box edge-label">2</span> Traffic Cost on Edge</div>
</div>
</div>
</div>
</div>
<script>
const gridData={width:10,height:7,tunnels:[{id:1,e1:{x:6,y:1},e2:{x:1,y:3}},{id:2,e1:{x:8,y:3},e2:{x:9,y:2}},{id:3,e1:{x:2,y:6},e2:{x:6,y:3}},{id:4,e1:{x:0,y:3},e2:{x:9,y:6}}]};const routesData=[{id:"0-0",store:{x:7,y:3},customer:{x:1,y:5},cost:44,steps:[{x:7,y:3},{x:7,y:4},{x:7,y:5},{x:7,y:6},{x:6,y:6},{x:6,y:5},{x:6,y:4},{x:6,y:3},{x:6,y:2},{x:6,y:1},{x:6,y:0},{x:5,y:0},{x:5,y:1},{x:5,y:2},{x:5,y:3},{x:5,y:4},{x:5,y:5},{x:5,y:6},{x:4,y:6},{x:4,y:5},{x:4,y:4},{x:4,y:3},{x:4,y:2},{x:4,y:1},{x:4,y:0},{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:3},{x:3,y:4},{x:3,y:5},{x:3,y:6},{x:2,y:6},{x:2,y:5},{x:2,y:4},{x:2,y:3},{x:2,y:2},{x:2,y:1},{x:2,y:0},{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:1,y:3},{x:1,y:4},{x:1,y:5},{x:1,y:4},{x:1,y:3},{x:1,y:2},{x:1,y:1},{x:1,y:0},{x:2,y:0},{x:2,y:1},{x:2,y:2},{x:2,y:3},{x:2,y:4},{x:2,y:5},{x:2,y:6},{x:3,y:6},{x:3,y:5},{x:3,y:4},{x:3,y:3},{x:3,y:2},{x:3,y:1},{x:3,y:0},{x:4,y:0},{x:4,y:1},{x:4,y:2},{x:4,y:3},{x:4,y:4},{x:4,y:5},{x:4,y:6},{x:5,y:6},{x:5,y:5},{x:5,y:4},{x:5,y:3},{x:5,y:2},{x:5,y:1},{x:5,y:0},{x:6,y:0},{x:6,y:1},{x:6,y:2},{x:6,y:3},{x:6,y:4},{x:6,y:5},{x:6,y:6},{x:7,y:6},{x:7,y:5},{x:7,y:4},{x:7,y:3}]},{id:"0-1",store:{x:7,y:3},customer:{x:2,y:0},cost:38,steps:[{x:7,y:3},{x:7,y:4},{x:7,y:5},{x:7,y:6},{x:6,y:6},{x:6,y:5},{x:6,y:4},{x:6,y:3},{x:6,y:2},{x:6,y:1},{x:6,y:0},{x:5,y:0},{x:5,y:1},{x:5,y:2},{x:5,y:3},{x:5,y:4},{x:5,y:5},{x:5,y:6},{x:4,y:6},{x:4,y:5},{x:4,y:4},{x:4,y:3},{x:4,y:2},{x:4,y:1},{x:4,y:0},{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:3},{x:3,y:4},{x:3,y:5},{x:3,y:6},{x:2,y:6},{x:2,y:5},{x:2,y:4},{x:2,y:3},{x:2,y:2},{x:2,y:1},{x:2,y:0},{x:2,y:1},{x:2,y:2},{x:2,y:3},{x:2,y:4},{x:2,y:5},{x:2,y:6},{x:3,y:6},{x:3,y:5},{x:3,y:4},{x:3,y:3},{x:3,y:2},{x:3,y:1},{x:3,y:0},{x:4,y:0},{x:4,y:1},{x:4,y:2},{x:4,y:3},{x:4,y:4},{x:4,y:5},{x:4,y:6},{x:5,y:6},{x:5,y:5},{x:5,y:4},{x:5,y:3},{x:5,y:2},{x:5,y:1},{x:5,y:0},{x:6,y:0},{x:6,y:1},{x:6,y:2},{x:6,y:3},{x:6,y:4},{x:6,y:5},{x:6,y:6},{x:7,y:6},{x:7,y:5},{x:7,y:4},{x:7,y:3}]},{id:"0-2",store:{x:7,y:3},customer:{x:2,y:3},cost:35,steps:[{x:7,y:3},{x:7,y:4},{x:7,y:5},{x:7,y:6},{x:6,y:6},{x:6,y:5},{x:6,y:4},{x:6,y:3},{x:6,y:2},{x:6,y:1},{x:6,y:0},{x:5,y:0},{x:5,y:1},{x:5,y:2},{x:5,y:3},{x:5,y:4},{x:5,y:5},{x:5,y:6},{x:4,y:6},{x:4,y:5},{x:4,y:4},{x:4,y:3},{x:4,y:2},{x:4,y:1},{x:4,y:0},{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:3},{x:3,y:4},{x:3,y:5},{x:3,y:6},{x:2,y:6},{x:2,y:5},{x:2,y:4},{x:2,y:3},{x:2,y:4},{x:2,y:5},{x:2,y:6},{x:3,y:6},{x:3,y:5},{x:3,y:4},{x:3,y:3},{x:3,y:2},{x:3,y:1},{x:3,y:0},{x:4,y:0},{x:4,y:1},{x:4,y:2},{x:4,y:3},{x:4,y:4},{x:4,y:5},{x:4,y:6},{x:5,y:6},{x:5,y:5},{x:5,y:4},{x:5,y:3},{x:5,y:2},{x:5,y:1},{x:5,y:0},{x:6,y:0},{x:6,y:1},{x:6,y:2},{x:6,y:3},{x:6,y:4},{x:6,y:5},{x:6,y:6},{x:7,y:6},{x:7,y:5},{x:7,y:4},{x:7,y:3}]},{id:"0-3",store:{x:7,y:3},customer:{x:3,y:6},cost:31,steps:[{x:7,y:3},{x:7,y:4},{x:7,y:5},{x:7,y:6},{x:6,y:6},{x:6,y:5},{x:6,y:4},{x:6,y:3},{x:6,y:2},{x:6,y:1},{x:6,y:0},{x:5,y:0},{x:5,y:1},{x:5,y:2},{x:5,y:3},{x:5,y:4},{x:5,y:5},{x:5,y:6},{x:4,y:6},{x:4,y:5},{x:4,y:4},{x:4,y:3},{x:4,y:2},{x:4,y:1},{x:4,y:0},{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:3},{x:3,y:4},{x:3,y:5},{x:3,y:6},{x:3,y:5},{x:3,y:4},{x:3,y:3},{x:3,y:2},{x:3,y:1},{x:3,y:0},{x:4,y:0},{x:4,y:1},{x:4,y:2},{x:4,y:3},{x:4,y:4},{x:4,y:5},{x:4,y:6},{x:5,y:6},{x:5,y:5},{x:5,y:4},{x:5,y:3},{x:5,y:2},{x:5,y:1},{x:5,y:0},{x:6,y:0},{x:6,y:1},{x:6,y:2},{x:6,y:3},{x:6,y:4},{x:6,y:5},{x:6,y:6},{x:7,y:6},{x:7,y:5},{x:7,y:4},{x:7,y:3}]},{id:"0-4",store:{x:7,y:3},customer:{x:6,y:6},cost:4,steps:[{x:7,y:3},{x:7,y:4},{x:7,y:5},{x:7,y:6},{x:6,y:6},{x:7,y:6},{x:7,y:5},{x:7,y:4},{x:7,y:3}]},{id:"0-5",store:{x:7,y:3},customer:{x:3,y:2},cost:27,steps:[{x:7,y:3},{x:7,y:4},{x:7,y:5},{x:7,y:6},{x:6,y:6},{x:6,y:5},{x:6,y:4},{x:6,y:3},{x:6,y:2},{x:6,y:1},{x:6,y:0},{x:5,y:0},{x:5,y:1},{x:5,y:2},{x:5,y:3},{x:5,y:4},{x:5,y:5},{x:5,y:6},{x:4,y:6},{x:4,y:5},{x:4,y:4},{x:4,y:3},{x:4,y:2},{x:4,y:1},{x:4,y:0},{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:1},{x:3,y:0},{x:4,y:0},{x:4,y:1},{x:4,y:2},{x:4,y:3},{x:4,y:4},{x:4,y:5},{x:4,y:6},{x:5,y:6},{x:5,y:5},{x:5,y:4},{x:5,y:3},{x:5,y:2},{x:5,y:1},{x:5,y:0},{x:6,y:0},{x:6,y:1},{x:6,y:2},{x:6,y:3},{x:6,y:4},{x:6,y:5},{x:6,y:6},{x:7,y:6},{x:7,y:5},{x:7,y:4},{x:7,y:3}]},{id:"0-6",store:{x:7,y:3},customer:{x:1,y:1},cost:40,steps:[{x:7,y:3},{x:7,y:4},{x:7,y:5},{x:7,y:6},{x:6,y:6},{x:6,y:5},{x:6,y:4},{x:6,y:3},{x:6,y:2},{x:6,y:1},{x:6,y:0},{x:5,y:0},{x:5,y:1},{x:5,y:2},{x:5,y:3},{x:5,y:4},{x:5,y:5},{x:5,y:6},{x:4,y:6},{x:4,y:5},{x:4,y:4},{x:4,y:3},{x:4,y:2},{x:4,y:1},{x:4,y:0},{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:3},{x:3,y:4},{x:3,y:5},{x:3,y:6},{x:2,y:6},{x:2,y:5},{x:2,y:4},{x:2,y:3},{x:2,y:2},{x:2,y:1},{x:2,y:0},{x:1,y:0},{x:1,y:1},{x:1,y:0},{x:2,y:0},{x:2,y:1},{x:2,y:2},{x:2,y:3},{x:2,y:4},{x:2,y:5},{x:2,y:6},{x:3,y:6},{x:3,y:5},{x:3,y:4},{x:3,y:3},{x:3,y:2},{x:3,y:1},{x:3,y:0},{x:4,y:0},{x:4,y:1},{x:4,y:2},{x:4,y:3},{x:4,y:4},{x:4,y:5},{x:4,y:6},{x:5,y:6},{x:5,y:5},{x:5,y:4},{x:5,y:3},{x:5,y:2},{x:5,y:1},{x:5,y:0},{x:6,y:0},{x:6,y:1},{x:6,y:2},{x:6,y:3},{x:6,y:4},{x:6,y:5},{x:6,y:6},{x:7,y:6},{x:7,y:5},{x:7,y:4},{x:7,y:3}]},{id:"0-7",store:{x:7,y:3},customer:{x:7,y:2},cost:71,steps:[{x:7,y:3},{x:7,y:4},{x:7,y:5},{x:7,y:6},{x:6,y:6},{x:6,y:5},{x:6,y:4},{x:6,y:3},{x:6,y:2},{x:6,y:1},{x:6,y:0},{x:5,y:0},{x:5,y:1},{x:5,y:2},{x:5,y:3},{x:5,y:4},{x:5,y:5},{x:5,y:6},{x:4,y:6},{x:4,y:5},{x:4,y:4},{x:4,y:3},{x:4,y:2},{x:4,y:1},{x:4,y:0},{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:3},{x:3,y:4},{x:3,y:5},{x:3,y:6},{x:2,y:6},{x:2,y:5},{x:2,y:4},{x:2,y:3},{x:2,y:2},{x:2,y:1},{x:2,y:0},{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:1,y:3},{x:1,y:4},{x:1,y:5},{x:1,y:6},{x:0,y:6},{x:0,y:5},{x:0,y:4},{x:0,y:3},{x:9,y:6},{x:9,y:5},{x:9,y:4},{x:9,y:3},{x:9,y:2},{x:9,y:1},{x:9,y:0},{x:8,y:0},{x:8,y:1},{x:8,y:2},{x:7,y:2},{x:8,y:2},{x:8,y:1},{x:8,y:0},{x:9,y:0},{x:9,y:1},{x:9,y:2},{x:9,y:3},{x:9,y:4},{x:9,y:5},{x:9,y:6},{x:0,y:3},{x:0,y:4},{x:0,y:5},{x:0,y:6},{x:1,y:6},{x:1,y:5},{x:1,y:4},{x:1,y:3},{x:1,y:2},{x:1,y:1},{x:1,y:0},{x:2,y:0},{x:2,y:1},{x:2,y:2},{x:2,y:3},{x:2,y:4},{x:2,y:5},{x:2,y:6},{x:3,y:6},{x:3,y:5},{x:3,y:4},{x:3,y:3},{x:3,y:2},{x:3,y:1},{x:3,y:0},{x:4,y:0},{x:4,y:1},{x:4,y:2},{x:4,y:3},{x:4,y:4},{x:4,y:5},{x:4,y:6},{x:5,y:6},{x:5,y:5},{x:5,y:4},{x:5,y:3},{x:5,y:2},{x:5,y:1},{x:5,y:0},{x:6,y:0},{x:6,y:1},{x:6,y:2},{x:6,y:3},{x:6,y:4},{x:6,y:5},{x:6,y:6},{x:7,y:6},{x:7,y:5},{x:7,y:4},{x:7,y:3}]},{id:"0-8",store:{x:7,y:3},customer:{x:0,y:0},cost:52,steps:[{x:7,y:3},{x:7,y:4},{x:7,y:5},{x:7,y:6},{x:6,y:6},{x:6,y:5},{x:6,y:4},{x:6,y:3},{x:6,y:2},{x:6,y:1},{x:6,y:0},{x:5,y:0},{x:5,y:1},{x:5,y:2},{x:5,y:3},{x:5,y:4},{x:5,y:5},{x:5,y:6},{x:4,y:6},{x:4,y:5},{x:4,y:4},{x:4,y:3},{x:4,y:2},{x:4,y:1},{x:4,y:0},{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:3},{x:3,y:4},{x:3,y:5},{x:3,y:6},{x:2,y:6},{x:2,y:5},{x:2,y:4},{x:2,y:3},{x:2,y:2},{x:2,y:1},{x:2,y:0},{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:1,y:3},{x:1,y:4},{x:1,y:5},{x:1,y:6},{x:0,y:6},{x:0,y:5},{x:0,y:4},{x:0,y:3},{x:0,y:2},{x:0,y:1},{x:0,y:0},{x:0,y:1},{x:0,y:2},{x:0,y:3},{x:0,y:4},{x:0,y:5},{x:0,y:6},{x:1,y:6},{x:1,y:5},{x:1,y:4},{x:1,y:3},{x:1,y:2},{x:1,y:1},{x:1,y:0},{x:2,y:0},{x:2,y:1},{x:2,y:2},{x:2,y:3},{x:2,y:4},{x:2,y:5},{x:2,y:6},{x:3,y:6},{x:3,y:5},{x:3,y:4},{x:3,y:3},{x:3,y:2},{x:3,y:1},{x:3,y:0},{x:4,y:0},{x:4,y:1},{x:4,y:2},{x:4,y:3},{x:4,y:4},{x:4,y:5},{x:4,y:6},{x:5,y:6},{x:5,y:5},{x:5,y:4},{x:5,y:3},{x:5,y:2},{x:5,y:1},{x:5,y:0},{x:6,y:0},{x:6,y:1},{x:6,y:2},{x:6,y:3},{x:6,y:4},{x:6,y:5},{x:6,y:6},{x:7,y:6},{x:7,y:5},{x:7,y:4},{x:7,y:3}]}];let currentRoute=null,currentStepIdx=0,isPlaying=false,playInterval=null,speed=1000;function resetGrid(){document.querySelectorAll('.cell').forEach(c=>{c.classList.remove('truck','path-forward','path-return');const t=c.dataset.type;if(t)c.classList.add(t);const i=c.querySelector('i');if(i&&i.classList.contains('fa-truck')){if(t==='store')i.className='fas fa-store';else if(t==='customer')i.className='fas fa-home';else if(t==='tunnel')i.className='fas fa-subway';else if(t==='blocked')i.className='fas fa-ban'}});document.querySelectorAll('.path-line').forEach(l=>l.remove());}function getCellAt(x,y){return document.querySelector(`.cell[data-x="${x}"][data-y="${y}"]`)}function selectRoute(routeId){currentRoute=routesData.find(r=>r.id===routeId);if(currentRoute){resetGrid();currentStepIdx=0;nextStep();document.querySelectorAll('.path-btn').forEach(b=>b.classList.remove('selected'));document.querySelector(`[data-route-id="${routeId}"]`).classList.add('selected');}}function applyAction(pos,action){let x=pos.x,y=pos.y;if(action==='up')y++;else if(action==='down')y--;else if(action==='left')x--;else if(action==='right')x++;else if(action==='tunnel'){const t=gridData.tunnels.find(tu=>(tu.e1.x===x&&tu.e1.y===y)||(tu.e2.x===x&&tu.e2.y===y));if(t){const tu=t;if(tu.e1.x===x&&tu.e1.y===y){x=tu.e2.x;y=tu.e2.y}else{x=tu.e1.x;y=tu.e1.y}}}return{x,y}}function drawPathLine(from,to,isReturn){const svg=document.querySelector('.edge-overlay');const line=document.createElementNS('http://www.w3.org/2000/svg','line');line.setAttribute('x1',from.x*62+31);line.setAttribute('y1',from.y*62+31);line.setAttribute('x2',to.x*62+31);line.setAttribute('y2',to.y*62+31);line.classList.add('path-line',isReturn?'path-return':'path-forward');line.style.stroke=isReturn?'#3b82f6':'#10b981';line.style.strokeWidth=4;line.style.markerEnd='url(#path-arrow)';svg.appendChild(line);}function nextStep(){if(!currentRoute)return;const isReturn=currentStepIdx>=currentRoute.steps.length/2;const stepIdx=isReturn?currentStepIdx-currentRoute.steps.length/2:currentStepIdx;const s=currentRoute.steps[stepIdx];const c=getCellAt(s.x,s.y);if(c){c.classList.add('truck',isReturn?'path-return':'path-forward');const i=c.querySelector('i');if(i)i.className='fas fa-truck';else c.innerHTML='<i class="fas fa-truck"></i>'+c.innerHTML;}if(currentStepIdx>0){const prevIdx=currentStepIdx-1;const ps=currentRoute.steps[prevIdx%currentRoute.steps.length];const pc=getCellAt(ps.x,ps.y);if(pc){pc.classList.remove('truck');pc.classList.add(prevIdx>=currentRoute.steps.length/2?'path-return':'path-forward');}}if(currentStepIdx>0&&currentStepIdx<currentRoute.steps.length){const prevPos=currentRoute.steps[currentStepIdx-1];drawPathLine(prevPos,s,currentStepIdx>=currentRoute.steps.length/2);}currentStepIdx++;if(currentStepIdx>=currentRoute.steps.length*2){stopPlay();currentStepIdx=0;}}function startPlay(){if(isPlaying||!currentRoute)return;isPlaying=true;document.getElementById('playBtn').style.display='none';document.getElementById('pauseBtn').style.display='inline-block';playInterval=setInterval(nextStep,speed)}function stopPlay(){isPlaying=false;document.getElementById('playBtn').style.display='inline-block';document.getElementById('pauseBtn').style.display='none';if(playInterval){clearInterval(playInterval);playInterval=null}}function reset(){stopPlay();currentStepIdx=0;resetGrid();currentRoute=null;document.querySelectorAll('.path-btn').forEach(b=>b.classList.remove('selected'));}</script>
</body>
</html>