<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Delivery Route Visualization</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;
       background:linear-gradient(135deg,#667eea 0%,#764ba2 100%); min-height:100vh; padding:20px; }
.container { max-width:1600px; margin:0 auto; background:white;
             border-radius:15px; box-shadow:0 20px 60px rgba(0,0,0,0.3); padding:30px; }
h1 { text-align:center; margin-bottom:30px; font-size:2.5em; color:#333; }

.controls { display:flex; justify-content:center; gap:15px; margin-bottom:30px; flex-wrap:wrap; align-items:center; }
.btn { padding:12px 24px; border:none; border-radius:8px; font-size:16px; cursor:pointer;
      transition:all 0.3s; font-weight:600; box-shadow:0 4px 6px rgba(0,0,0,0.1); }
.btn:hover { transform:translateY(-2px); box-shadow:0 6px 12px rgba(0,0,0,0.15); }
.btn-primary { background:#667eea; color:white; }
.btn-success { background:#10b981; color:white; }
.btn-warning { background:#f59e0b; color:white; }
.btn-secondary { background:#6b7280; color:white; }

.speed-control { display:flex; align-items:center; gap:10px; background:#f3f4f6; padding:8px 16px; border-radius:8px; }

.main-content { display:grid; grid-template-columns:1fr 420px; gap:30px; }
.grid-container { background:#f9fafb; padding:20px; border-radius:10px; overflow:auto; position:relative; }
.grid { display:grid; grid-template-columns:repeat(6,60px); grid-template-rows:repeat(11,60px);
        gap:2px; margin:0 auto; width:fit-content; position:relative; }
.cell { width:60px; height:60px; border:2px solid #d1d5db; border-radius:8px;
        display:flex; align-items:center; justify-content:center; font-size:24px;
        background:white; transition:all 0.3s; position:relative; }
.cell:hover { transform:scale(1.05); z-index:10; }

.cell.store { background:linear-gradient(135deg,#3b82f6,#2563eb); color:white; }
.cell.customer { background:linear-gradient(135deg,#10b981,#059669); color:white; }
.cell.tunnel { background:linear-gradient(135deg,#6b7280,#4b5563); color:white; }
.cell.blocked { background:linear-gradient(135deg,#ef4444,#dc2626); color:white; }
.cell.truck { background:linear-gradient(135deg,#fbbf24,#f59e0b); color:white;
              animation:pulse 1s infinite; box-shadow:0 0 20px rgba(251,191,36,0.6); }
@keyframes pulse { 0%,100% {transform:scale(1)} 50% {transform:scale(1.1)} }

.tunnel-number { position:absolute; bottom:4px; right:4px; background:#ef4444; color:white;
                 font-size:10px; padding:2px 5px; border-radius:50%; font-weight:bold; }
.cell-number { position:absolute; top:2px; right:4px; font-size:12px; font-weight:bold;
               background:rgba(255,255,255,0.9); color:#333; padding:2px 6px; border-radius:4px; }

.edge-overlay { position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; }
.edge { stroke:#ccc; stroke-width:2; }
.edge-blocked { stroke:#ef4444; stroke-dasharray:6,6; }
.edge-label { position:absolute; font-size:11px; font-weight:bold; background:rgba(255,255,255,0.9);
              padding:2px 5px; border-radius:4px; pointer-events:none; }

.path-line { stroke-width:5; stroke-linecap:round; pointer-events:none; }
.path-forward { stroke:#10b981; }
.path-return { stroke:#3b82f6; }

.results-panel { background:#f9fafb; padding:20px; border-radius:10px; max-height:800px; overflow-y:auto; }
#pathSelector { background:#f3f4f6; padding:15px; border-radius:8px; margin-bottom:20px; max-height:300px; overflow-y:auto; }
.path-btn { display:block; width:100%; margin-bottom:8px; padding:12px; border:none;
            background:#e5e7eb; border-radius:6px; cursor:pointer; text-align:left; transition:0.2s; }
.path-btn:hover { background:#d1d5db; }
.path-btn.selected { background:#10b981; color:white; }

#results { background:white; padding:15px; border-radius:8px; font-family:'Courier New',monospace;
           font-size:14px; line-height:1.6; margin-bottom:20px; box-shadow:0 2px 4px rgba(0,0,0,0.1); }
.store-assignment { margin-bottom:15px; padding:10px; background:#f3f4f6; border-radius:6px;
                    border-left:4px solid #667eea; }
.total-cost { font-size:18px; font-weight:bold; color:#10b981; margin-top:15px;
              padding:12px; background:#d1fae5; border-radius:6px; text-align:center; }

.legend { margin-top:20px; }
.legend-item { display:flex; align-items:center; margin-bottom:12px; gap:12px; }
    .legend-box { min-width:50px; height:50px; border-radius:8px; display:flex;
              align-items:center; justify-content:center; font-size:20px;
              flex-shrink:0; }
    .legend-box i { font-size:20px; }
    .legend-label { font-size:14px; font-weight:500; }
.legend-box.store { background:linear-gradient(135deg,#3b82f6,#2563eb); color:white; }
.legend-box.customer { background:linear-gradient(135deg,#10b981,#059669); color:white; }
.legend-box.tunnel { background:linear-gradient(135deg,#6b7280,#4b5563); color:white; }
.legend-box.blocked { background:linear-gradient(135deg,#ef4444,#dc2626); color:white; }
.legend-box.truck { background:linear-gradient(135deg,#fbbf24,#f59e0b); color:white; }
.legend-box.edge-label { background:rgba(255,255,255,0.9); color:#333;
                         border:2px solid #d1d5db; font-weight:bold; }

@media (max-width:1200px) { .main-content { grid-template-columns:1fr; } }

    </style>
</head>
<body>
    <div class="container">
        <h1>Delivery Route Visualization</h1>
        <div class="controls">
            <button id="nextBtn" class="btn btn-primary">Next Step</button>
            <button id="playBtn" class="btn btn-success">Play</button>
            <button id="pauseBtn" class="btn btn-warning" style="display:none;">Pause</button>
            <button id="resetBtn" class="btn btn-secondary">Reset</button>
            <span class="speed-control">
                <label>Speed: </label>
                <input type="range" id="speedSlider" min="200" max="2000" value="800" step="100">
                <span id="speedValue">800ms</span>
            </span>
        </div>

        <div class="main-content">
            <div class="grid-container"><div class="grid" id="grid">
<div class="cell" data-x="0" data-y="0" data-type="customer"><i class="fas fa-home"></i><span class="cell-number">5</span></div>
<div class="cell" data-x="1" data-y="0"></div>
<div class="cell" data-x="2" data-y="0" data-type="customer"><i class="fas fa-home"></i><span class="cell-number">4</span></div>
<div class="cell" data-x="3" data-y="0"></div>
<div class="cell" data-x="4" data-y="0"></div>
<div class="cell" data-x="5" data-y="0"></div>
<div class="cell" data-x="0" data-y="1" data-type="customer"><i class="fas fa-home"></i><span class="cell-number">1</span></div>
<div class="cell" data-x="1" data-y="1"></div>
<div class="cell" data-x="2" data-y="1" data-type="store"><i class="fas fa-store"></i><span class="cell-number">1</span></div>
<div class="cell" data-x="3" data-y="1" data-type="customer"><i class="fas fa-home"></i><span class="cell-number">3</span></div>
<div class="cell" data-x="4" data-y="1"></div>
<div class="cell" data-x="5" data-y="1"></div>
<div class="cell" data-x="0" data-y="2" data-type="store"><i class="fas fa-store"></i><span class="cell-number">2</span></div>
<div class="cell" data-x="1" data-y="2"></div>
<div class="cell" data-x="2" data-y="2" data-type="tunnel"><i class="fas fa-subway"></i><span class="tunnel-number">1</span></div>
<div class="cell" data-x="3" data-y="2"></div>
<div class="cell" data-x="4" data-y="2"></div>
<div class="cell" data-x="5" data-y="2" data-type="tunnel"><i class="fas fa-subway"></i><span class="tunnel-number">1</span></div>
<div class="cell" data-x="0" data-y="3"></div>
<div class="cell" data-x="1" data-y="3"></div>
<div class="cell" data-x="2" data-y="3"></div>
<div class="cell" data-x="3" data-y="3"></div>
<div class="cell" data-x="4" data-y="3"></div>
<div class="cell" data-x="5" data-y="3"></div>
<div class="cell" data-x="0" data-y="4"></div>
<div class="cell" data-x="1" data-y="4"></div>
<div class="cell" data-x="2" data-y="4"></div>
<div class="cell" data-x="3" data-y="4" data-type="customer"><i class="fas fa-home"></i><span class="cell-number">9</span></div>
<div class="cell" data-x="4" data-y="4"></div>
<div class="cell" data-x="5" data-y="4"></div>
<div class="cell" data-x="0" data-y="5"></div>
<div class="cell" data-x="1" data-y="5"></div>
<div class="cell" data-x="2" data-y="5" data-type="store"><i class="fas fa-store"></i><span class="cell-number">3</span></div>
<div class="cell" data-x="3" data-y="5" data-type="customer"><i class="fas fa-home"></i><span class="cell-number">6</span></div>
<div class="cell" data-x="4" data-y="5"></div>
<div class="cell" data-x="5" data-y="5"></div>
<div class="cell" data-x="0" data-y="6"></div>
<div class="cell" data-x="1" data-y="6" data-type="tunnel"><i class="fas fa-subway"></i><span class="tunnel-number">2</span></div>
<div class="cell" data-x="2" data-y="6"></div>
<div class="cell" data-x="3" data-y="6" data-type="customer"><i class="fas fa-home"></i><span class="cell-number">7</span></div>
<div class="cell" data-x="4" data-y="6"></div>
<div class="cell" data-x="5" data-y="6"></div>
<div class="cell" data-x="0" data-y="7"></div>
<div class="cell" data-x="1" data-y="7"></div>
<div class="cell" data-x="2" data-y="7"></div>
<div class="cell" data-x="3" data-y="7"></div>
<div class="cell" data-x="4" data-y="7"></div>
<div class="cell" data-x="5" data-y="7"></div>
<div class="cell" data-x="0" data-y="8"></div>
<div class="cell" data-x="1" data-y="8"></div>
<div class="cell" data-x="2" data-y="8" data-type="customer"><i class="fas fa-home"></i><span class="cell-number">8</span></div>
<div class="cell" data-x="3" data-y="8"></div>
<div class="cell" data-x="4" data-y="8"></div>
<div class="cell" data-x="5" data-y="8"></div>
<div class="cell" data-x="0" data-y="9"></div>
<div class="cell" data-x="1" data-y="9"></div>
<div class="cell" data-x="2" data-y="9"></div>
<div class="cell" data-x="3" data-y="9"></div>
<div class="cell" data-x="4" data-y="9" data-type="tunnel"><i class="fas fa-subway"></i><span class="tunnel-number">2</span></div>
<div class="cell" data-x="5" data-y="9"></div>
<div class="cell" data-x="0" data-y="10"></div>
<div class="cell" data-x="1" data-y="10"></div>
<div class="cell" data-x="2" data-y="10" data-type="customer"><i class="fas fa-home"></i><span class="cell-number">2</span></div>
<div class="cell" data-x="3" data-y="10"></div>
<div class="cell" data-x="4" data-y="10"></div>
<div class="cell" data-x="5" data-y="10"></div>
<svg class="edge-overlay" width="372" height="682">
<line x1="31" y1="31" x2="93" y2="31" class="edge"/>
<line x1="93" y1="31" x2="155" y2="31" class="edge"/>
<line x1="155" y1="31" x2="217" y2="31" class="edge"/>
<line x1="217" y1="31" x2="279" y2="31" class="edge"/>
<line x1="279" y1="31" x2="341" y2="31" class="edge"/>
<line x1="31" y1="93" x2="93" y2="93" class="edge"/>
<line x1="93" y1="93" x2="155" y2="93" class="edge"/>
<line x1="155" y1="93" x2="217" y2="93" class="edge"/>
<line x1="217" y1="93" x2="279" y2="93" class="edge"/>
<line x1="279" y1="93" x2="341" y2="93" class="edge"/>
<line x1="31" y1="155" x2="93" y2="155" class="edge"/>
<line x1="93" y1="155" x2="155" y2="155" class="edge"/>
<line x1="155" y1="155" x2="217" y2="155" class="edge edge-blocked"/>
<line x1="217" y1="155" x2="279" y2="155" class="edge"/>
<line x1="279" y1="155" x2="341" y2="155" class="edge"/>
<line x1="31" y1="217" x2="93" y2="217" class="edge"/>
<line x1="93" y1="217" x2="155" y2="217" class="edge edge-blocked"/>
<line x1="155" y1="217" x2="217" y2="217" class="edge"/>
<line x1="217" y1="217" x2="279" y2="217" class="edge"/>
<line x1="279" y1="217" x2="341" y2="217" class="edge"/>
<line x1="31" y1="279" x2="93" y2="279" class="edge"/>
<line x1="93" y1="279" x2="155" y2="279" class="edge"/>
<line x1="155" y1="279" x2="217" y2="279" class="edge edge-blocked"/>
<line x1="217" y1="279" x2="279" y2="279" class="edge"/>
<line x1="279" y1="279" x2="341" y2="279" class="edge"/>
<line x1="31" y1="341" x2="93" y2="341" class="edge"/>
<line x1="93" y1="341" x2="155" y2="341" class="edge edge-blocked"/>
<line x1="155" y1="341" x2="217" y2="341" class="edge edge-blocked"/>
<line x1="217" y1="341" x2="279" y2="341" class="edge"/>
<line x1="279" y1="341" x2="341" y2="341" class="edge"/>
<line x1="31" y1="403" x2="93" y2="403" class="edge edge-blocked"/>
<line x1="93" y1="403" x2="155" y2="403" class="edge"/>
<line x1="155" y1="403" x2="217" y2="403" class="edge"/>
<line x1="217" y1="403" x2="279" y2="403" class="edge"/>
<line x1="279" y1="403" x2="341" y2="403" class="edge"/>
<line x1="31" y1="465" x2="93" y2="465" class="edge"/>
<line x1="93" y1="465" x2="155" y2="465" class="edge edge-blocked"/>
<line x1="155" y1="465" x2="217" y2="465" class="edge"/>
<line x1="217" y1="465" x2="279" y2="465" class="edge"/>
<line x1="279" y1="465" x2="341" y2="465" class="edge edge-blocked"/>
<line x1="31" y1="527" x2="93" y2="527" class="edge"/>
<line x1="93" y1="527" x2="155" y2="527" class="edge edge-blocked"/>
<line x1="155" y1="527" x2="217" y2="527" class="edge"/>
<line x1="217" y1="527" x2="279" y2="527" class="edge"/>
<line x1="279" y1="527" x2="341" y2="527" class="edge edge-blocked"/>
<line x1="31" y1="589" x2="93" y2="589" class="edge"/>
<line x1="93" y1="589" x2="155" y2="589" class="edge"/>
<line x1="155" y1="589" x2="217" y2="589" class="edge"/>
<line x1="217" y1="589" x2="279" y2="589" class="edge"/>
<line x1="279" y1="589" x2="341" y2="589" class="edge"/>
<line x1="31" y1="651" x2="93" y2="651" class="edge"/>
<line x1="93" y1="651" x2="155" y2="651" class="edge"/>
<line x1="155" y1="651" x2="217" y2="651" class="edge"/>
<line x1="217" y1="651" x2="279" y2="651" class="edge"/>
<line x1="279" y1="651" x2="341" y2="651" class="edge"/>
<line x1="31" y1="31" x2="31" y2="93" class="edge edge-blocked"/>
<line x1="31" y1="93" x2="31" y2="155" class="edge"/>
<line x1="31" y1="155" x2="31" y2="217" class="edge edge-blocked"/>
<line x1="31" y1="217" x2="31" y2="279" class="edge"/>
<line x1="31" y1="279" x2="31" y2="341" class="edge"/>
<line x1="31" y1="341" x2="31" y2="403" class="edge"/>
<line x1="31" y1="403" x2="31" y2="465" class="edge"/>
<line x1="31" y1="465" x2="31" y2="527" class="edge"/>
<line x1="31" y1="527" x2="31" y2="589" class="edge"/>
<line x1="31" y1="589" x2="31" y2="651" class="edge"/>
<line x1="93" y1="31" x2="93" y2="93" class="edge"/>
<line x1="93" y1="93" x2="93" y2="155" class="edge"/>
<line x1="93" y1="155" x2="93" y2="217" class="edge"/>
<line x1="93" y1="217" x2="93" y2="279" class="edge"/>
<line x1="93" y1="279" x2="93" y2="341" class="edge edge-blocked"/>
<line x1="93" y1="341" x2="93" y2="403" class="edge"/>
<line x1="93" y1="403" x2="93" y2="465" class="edge"/>
<line x1="93" y1="465" x2="93" y2="527" class="edge edge-blocked"/>
<line x1="93" y1="527" x2="93" y2="589" class="edge"/>
<line x1="93" y1="589" x2="93" y2="651" class="edge"/>
<line x1="155" y1="31" x2="155" y2="93" class="edge"/>
<line x1="155" y1="93" x2="155" y2="155" class="edge"/>
<line x1="155" y1="155" x2="155" y2="217" class="edge"/>
<line x1="155" y1="217" x2="155" y2="279" class="edge edge-blocked"/>
<line x1="155" y1="279" x2="155" y2="341" class="edge"/>
<line x1="155" y1="341" x2="155" y2="403" class="edge"/>
<line x1="155" y1="403" x2="155" y2="465" class="edge"/>
<line x1="155" y1="465" x2="155" y2="527" class="edge"/>
<line x1="155" y1="527" x2="155" y2="589" class="edge"/>
<line x1="155" y1="589" x2="155" y2="651" class="edge edge-blocked"/>
<line x1="217" y1="31" x2="217" y2="93" class="edge"/>
<line x1="217" y1="93" x2="217" y2="155" class="edge edge-blocked"/>
<line x1="217" y1="155" x2="217" y2="217" class="edge"/>
<line x1="217" y1="217" x2="217" y2="279" class="edge"/>
<line x1="217" y1="279" x2="217" y2="341" class="edge"/>
<line x1="217" y1="341" x2="217" y2="403" class="edge"/>
<line x1="217" y1="403" x2="217" y2="465" class="edge"/>
<line x1="217" y1="465" x2="217" y2="527" class="edge"/>
<line x1="217" y1="527" x2="217" y2="589" class="edge"/>
<line x1="217" y1="589" x2="217" y2="651" class="edge"/>
<line x1="279" y1="31" x2="279" y2="93" class="edge"/>
<line x1="279" y1="93" x2="279" y2="155" class="edge edge-blocked"/>
<line x1="279" y1="155" x2="279" y2="217" class="edge"/>
<line x1="279" y1="217" x2="279" y2="279" class="edge"/>
<line x1="279" y1="279" x2="279" y2="341" class="edge"/>
<line x1="279" y1="341" x2="279" y2="403" class="edge"/>
<line x1="279" y1="403" x2="279" y2="465" class="edge"/>
<line x1="279" y1="465" x2="279" y2="527" class="edge edge-blocked"/>
<line x1="279" y1="527" x2="279" y2="589" class="edge"/>
<line x1="279" y1="589" x2="279" y2="651" class="edge"/>
<line x1="341" y1="31" x2="341" y2="93" class="edge"/>
<line x1="341" y1="93" x2="341" y2="155" class="edge"/>
<line x1="341" y1="155" x2="341" y2="217" class="edge"/>
<line x1="341" y1="217" x2="341" y2="279" class="edge"/>
<line x1="341" y1="279" x2="341" y2="341" class="edge"/>
<line x1="341" y1="341" x2="341" y2="403" class="edge edge-blocked"/>
<line x1="341" y1="403" x2="341" y2="465" class="edge"/>
<line x1="341" y1="465" x2="341" y2="527" class="edge"/>
<line x1="341" y1="527" x2="341" y2="589" class="edge"/>
<line x1="341" y1="589" x2="341" y2="651" class="edge"/>
</svg>
<div class="edge-label" style="left:52px;top:21px;">1</div>
<div class="edge-label" style="left:114px;top:21px;">3</div>
<div class="edge-label" style="left:176px;top:21px;">4</div>
<div class="edge-label" style="left:238px;top:21px;">1</div>
<div class="edge-label" style="left:300px;top:21px;">4</div>
<div class="edge-label" style="left:52px;top:83px;">3</div>
<div class="edge-label" style="left:114px;top:83px;">4</div>
<div class="edge-label" style="left:176px;top:83px;">4</div>
<div class="edge-label" style="left:238px;top:83px;">4</div>
<div class="edge-label" style="left:300px;top:83px;">1</div>
<div class="edge-label" style="left:52px;top:145px;">2</div>
<div class="edge-label" style="left:114px;top:145px;">3</div>
<div class="edge-label" style="left:176px;top:145px;"><i class="fas fa-ban" style="color:red;"></i></div>
<div class="edge-label" style="left:238px;top:145px;">4</div>
<div class="edge-label" style="left:300px;top:145px;">3</div>
<div class="edge-label" style="left:52px;top:207px;">1</div>
<div class="edge-label" style="left:114px;top:207px;"><i class="fas fa-ban" style="color:red;"></i></div>
<div class="edge-label" style="left:176px;top:207px;">1</div>
<div class="edge-label" style="left:238px;top:207px;">1</div>
<div class="edge-label" style="left:300px;top:207px;">3</div>
<div class="edge-label" style="left:52px;top:269px;">1</div>
<div class="edge-label" style="left:114px;top:269px;">1</div>
<div class="edge-label" style="left:176px;top:269px;"><i class="fas fa-ban" style="color:red;"></i></div>
<div class="edge-label" style="left:238px;top:269px;">3</div>
<div class="edge-label" style="left:300px;top:269px;">1</div>
<div class="edge-label" style="left:52px;top:331px;">3</div>
<div class="edge-label" style="left:114px;top:331px;"><i class="fas fa-ban" style="color:red;"></i></div>
<div class="edge-label" style="left:176px;top:331px;"><i class="fas fa-ban" style="color:red;"></i></div>
<div class="edge-label" style="left:238px;top:331px;">3</div>
<div class="edge-label" style="left:300px;top:331px;">3</div>
<div class="edge-label" style="left:52px;top:393px;"><i class="fas fa-ban" style="color:red;"></i></div>
<div class="edge-label" style="left:114px;top:393px;">4</div>
<div class="edge-label" style="left:176px;top:393px;">1</div>
<div class="edge-label" style="left:238px;top:393px;">1</div>
<div class="edge-label" style="left:300px;top:393px;">3</div>
<div class="edge-label" style="left:52px;top:455px;">2</div>
<div class="edge-label" style="left:114px;top:455px;"><i class="fas fa-ban" style="color:red;"></i></div>
<div class="edge-label" style="left:176px;top:455px;">2</div>
<div class="edge-label" style="left:238px;top:455px;">2</div>
<div class="edge-label" style="left:300px;top:455px;"><i class="fas fa-ban" style="color:red;"></i></div>
<div class="edge-label" style="left:52px;top:517px;">1</div>
<div class="edge-label" style="left:114px;top:517px;"><i class="fas fa-ban" style="color:red;"></i></div>
<div class="edge-label" style="left:176px;top:517px;">2</div>
<div class="edge-label" style="left:238px;top:517px;">4</div>
<div class="edge-label" style="left:300px;top:517px;"><i class="fas fa-ban" style="color:red;"></i></div>
<div class="edge-label" style="left:52px;top:579px;">3</div>
<div class="edge-label" style="left:114px;top:579px;">3</div>
<div class="edge-label" style="left:176px;top:579px;">2</div>
<div class="edge-label" style="left:238px;top:579px;">2</div>
<div class="edge-label" style="left:300px;top:579px;">4</div>
<div class="edge-label" style="left:52px;top:641px;">3</div>
<div class="edge-label" style="left:114px;top:641px;">4</div>
<div class="edge-label" style="left:176px;top:641px;">4</div>
<div class="edge-label" style="left:238px;top:641px;">3</div>
<div class="edge-label" style="left:300px;top:641px;">1</div>
<div class="edge-label" style="left:21px;top:52px;"><i class="fas fa-ban" style="color:red;"></i></div>
<div class="edge-label" style="left:21px;top:114px;">3</div>
<div class="edge-label" style="left:21px;top:176px;"><i class="fas fa-ban" style="color:red;"></i></div>
<div class="edge-label" style="left:21px;top:238px;">1</div>
<div class="edge-label" style="left:21px;top:300px;">3</div>
<div class="edge-label" style="left:21px;top:362px;">2</div>
<div class="edge-label" style="left:21px;top:424px;">3</div>
<div class="edge-label" style="left:21px;top:486px;">2</div>
<div class="edge-label" style="left:21px;top:548px;">3</div>
<div class="edge-label" style="left:21px;top:610px;">4</div>
<div class="edge-label" style="left:83px;top:52px;">2</div>
<div class="edge-label" style="left:83px;top:114px;">2</div>
<div class="edge-label" style="left:83px;top:176px;">3</div>
<div class="edge-label" style="left:83px;top:238px;">2</div>
<div class="edge-label" style="left:83px;top:300px;"><i class="fas fa-ban" style="color:red;"></i></div>
<div class="edge-label" style="left:83px;top:362px;">4</div>
<div class="edge-label" style="left:83px;top:424px;">4</div>
<div class="edge-label" style="left:83px;top:486px;"><i class="fas fa-ban" style="color:red;"></i></div>
<div class="edge-label" style="left:83px;top:548px;">1</div>
<div class="edge-label" style="left:83px;top:610px;">2</div>
<div class="edge-label" style="left:145px;top:52px;">3</div>
<div class="edge-label" style="left:145px;top:114px;">2</div>
<div class="edge-label" style="left:145px;top:176px;">2</div>
<div class="edge-label" style="left:145px;top:238px;"><i class="fas fa-ban" style="color:red;"></i></div>
<div class="edge-label" style="left:145px;top:300px;">2</div>
<div class="edge-label" style="left:145px;top:362px;">4</div>
<div class="edge-label" style="left:145px;top:424px;">4</div>
<div class="edge-label" style="left:145px;top:486px;">4</div>
<div class="edge-label" style="left:145px;top:548px;">2</div>
<div class="edge-label" style="left:145px;top:610px;"><i class="fas fa-ban" style="color:red;"></i></div>
<div class="edge-label" style="left:207px;top:52px;">1</div>
<div class="edge-label" style="left:207px;top:114px;"><i class="fas fa-ban" style="color:red;"></i></div>
<div class="edge-label" style="left:207px;top:176px;">1</div>
<div class="edge-label" style="left:207px;top:238px;">1</div>
<div class="edge-label" style="left:207px;top:300px;">3</div>
<div class="edge-label" style="left:207px;top:362px;">1</div>
<div class="edge-label" style="left:207px;top:424px;">2</div>
<div class="edge-label" style="left:207px;top:486px;">1</div>
<div class="edge-label" style="left:207px;top:548px;">2</div>
<div class="edge-label" style="left:207px;top:610px;">4</div>
<div class="edge-label" style="left:269px;top:52px;">4</div>
<div class="edge-label" style="left:269px;top:114px;"><i class="fas fa-ban" style="color:red;"></i></div>
<div class="edge-label" style="left:269px;top:176px;">4</div>
<div class="edge-label" style="left:269px;top:238px;">2</div>
<div class="edge-label" style="left:269px;top:300px;">4</div>
<div class="edge-label" style="left:269px;top:362px;">4</div>
<div class="edge-label" style="left:269px;top:424px;">1</div>
<div class="edge-label" style="left:269px;top:486px;"><i class="fas fa-ban" style="color:red;"></i></div>
<div class="edge-label" style="left:269px;top:548px;">2</div>
<div class="edge-label" style="left:269px;top:610px;">4</div>
<div class="edge-label" style="left:331px;top:52px;">1</div>
<div class="edge-label" style="left:331px;top:114px;">2</div>
<div class="edge-label" style="left:331px;top:176px;">2</div>
<div class="edge-label" style="left:331px;top:238px;">1</div>
<div class="edge-label" style="left:331px;top:300px;">1</div>
<div class="edge-label" style="left:331px;top:362px;"><i class="fas fa-ban" style="color:red;"></i></div>
<div class="edge-label" style="left:331px;top:424px;">2</div>
<div class="edge-label" style="left:331px;top:486px;">1</div>
<div class="edge-label" style="left:331px;top:548px;">4</div>
<div class="edge-label" style="left:331px;top:610px;">3</div>
</div>
</div>
            <div class="results-panel">
                <h2>Select Path to Animate</h2>
                <div id="pathSelector"><button class="path-btn" data-route-id="0-1">Store 1 to Customer 2 (Cost: 77)</button>
<button class="path-btn" data-route-id="0-2">Store 1 to Customer 3 (Cost: 126)</button>
<button class="path-btn" data-route-id="0-5">Store 1 to Customer 6 (Cost: 63)</button>
<button class="path-btn" data-route-id="0-6">Store 1 to Customer 7 (Cost: 64)</button>
<button class="path-btn" data-route-id="0-8">Store 1 to Customer 9 (Cost: 60)</button>
<button class="path-btn" data-route-id="1-0">Store 2 to Customer 1 (Cost: 49)</button>
<button class="path-btn" data-route-id="2-3">Store 3 to Customer 4 (Cost: 51)</button>
<button class="path-btn" data-route-id="2-4">Store 3 to Customer 5 (Cost: 49)</button>
<button class="path-btn" data-route-id="2-7">Store 3 to Customer 8 (Cost: 12)</button>
</div>
                <h3>Search Results</h3>
                <div id="results"><div class="store-assignment"><strong>Store 1 to Customers [1, 2, 5, 6, 8]</strong><br><div class="route-info">Customer 2: Cost = 77</div><div class="route-info">Customer 3: Cost = 126</div><div class="route-info">Customer 6: Cost = 63</div><div class="route-info">Customer 7: Cost = 64</div><div class="route-info">Customer 9: Cost = 60</div><div class="route-info" style="color:#10b981;font-weight:bold;">Store Total: 390</div></div><div class="store-assignment"><strong>Store 2 to Customers [0]</strong><br><div class="route-info">Customer 1: Cost = 49</div><div class="route-info" style="color:#10b981;font-weight:bold;">Store Total: 49</div></div><div class="store-assignment"><strong>Store 3 to Customers [3, 4, 7]</strong><br><div class="route-info">Customer 4: Cost = 51</div><div class="route-info">Customer 5: Cost = 49</div><div class="route-info">Customer 8: Cost = 12</div><div class="route-info" style="color:#10b981;font-weight:bold;">Store Total: 112</div></div><div class="total-cost">Total Cost: 551</div></div>
                <div class="legend">
                    <h3>Legend</h3>
                    <div class="legend-item"><span class="legend-box store"><i class="fas fa-store"></i></span><span class="legend-label">Store</span></div>
                    <div class="legend-item"><span class="legend-box customer"><i class="fas fa-home"></i></span><span class="legend-label">Customer</span></div>
                    <div class="legend-item"><span class="legend-box tunnel"><i class="fas fa-subway"></i></span><span class="legend-label">Tunnel Entrance</span></div>
                    <div class="legend-item"><span class="legend-box blocked"><i class="fas fa-ban" style="color:white;"></i></span><span class="legend-label">Blocked Road</span></div>
                    <div class="legend-item"><span class="legend-box truck"><i class="fas fa-truck"></i></span><span class="legend-label">Truck</span></div>
                    <div class="legend-item"><span class="legend-box edge-label">3</span><span class="legend-label">Traffic Cost</span></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const routes = [{"id":"0-1","forwardSteps":31,"steps":[{"x":2,"y":1},{"x":2,"y":2},{"x":2,"y":3},{"x":2,"y":4},{"x":2,"y":5},{"x":1,"y":5},{"x":1,"y":6},{"x":0,"y":6},{"x":0,"y":5},{"x":0,"y":4},{"x":0,"y":3},{"x":0,"y":2},{"x":0,"y":1},{"x":0,"y":0},{"x":0,"y":-1},{"x":1,"y":-1},{"x":1,"y":-2},{"x":1,"y":-3},{"x":1,"y":-4},{"x":2,"y":-4},{"x":2,"y":-3},{"x":2,"y":-2},{"x":2,"y":-1},{"x":3,"y":-1},{"x":3,"y":0},{"x":3,"y":1},{"x":3,"y":2},{"x":3,"y":3},{"x":3,"y":4},{"x":3,"y":5},{"x":3,"y":6},{"x":2,"y":6},{"x":3,"y":6},{"x":3,"y":5},{"x":3,"y":4},{"x":3,"y":3},{"x":3,"y":2},{"x":3,"y":1},{"x":3,"y":0},{"x":3,"y":-1},{"x":2,"y":-1},{"x":2,"y":-2},{"x":2,"y":-3},{"x":2,"y":-4},{"x":1,"y":-4},{"x":1,"y":-3},{"x":1,"y":-2},{"x":1,"y":-1},{"x":0,"y":-1},{"x":0,"y":0},{"x":0,"y":1},{"x":0,"y":2},{"x":0,"y":3},{"x":0,"y":4},{"x":0,"y":5},{"x":0,"y":6},{"x":1,"y":6},{"x":1,"y":5},{"x":2,"y":5},{"x":2,"y":4},{"x":2,"y":3},{"x":2,"y":2},{"x":2,"y":1}]},{"id":"0-2","forwardSteps":47,"steps":[{"x":2,"y":1},{"x":2,"y":2},{"x":2,"y":3},{"x":2,"y":4},{"x":2,"y":5},{"x":1,"y":5},{"x":1,"y":6},{"x":0,"y":6},{"x":0,"y":5},{"x":0,"y":4},{"x":0,"y":3},{"x":0,"y":2},{"x":0,"y":1},{"x":0,"y":0},{"x":0,"y":-1},{"x":1,"y":-1},{"x":1,"y":-2},{"x":1,"y":-3},{"x":1,"y":-4},{"x":2,"y":-4},{"x":2,"y":-3},{"x":2,"y":-2},{"x":2,"y":-1},{"x":3,"y":-1},{"x":3,"y":0},{"x":3,"y":1},{"x":3,"y":2},{"x":3,"y":3},{"x":3,"y":4},{"x":3,"y":5},{"x":3,"y":6},{"x":4,"y":6},{"x":4,"y":5},{"x":5,"y":5},{"x":5,"y":4},{"x":5,"y":3},{"x":5,"y":2},{"x":4,"y":2},{"x":4,"y":1},{"x":4,"y":0},{"x":4,"y":-1},{"x":4,"y":-2},{"x":5,"y":-2},{"x":5,"y":-3},{"x":5,"y":-4},{"x":4,"y":-4},{"x":4,"y":-3},{"x":3,"y":-3},{"x":4,"y":-3},{"x":4,"y":-4},{"x":5,"y":-4},{"x":5,"y":-3},{"x":5,"y":-2},{"x":4,"y":-2},{"x":4,"y":-1},{"x":4,"y":0},{"x":4,"y":1},{"x":4,"y":2},{"x":5,"y":2},{"x":5,"y":3},{"x":5,"y":4},{"x":5,"y":5},{"x":4,"y":5},{"x":4,"y":6},{"x":3,"y":6},{"x":3,"y":5},{"x":3,"y":4},{"x":3,"y":3},{"x":3,"y":2},{"x":3,"y":1},{"x":3,"y":0},{"x":3,"y":-1},{"x":2,"y":-1},{"x":2,"y":-2},{"x":2,"y":-3},{"x":2,"y":-4},{"x":1,"y":-4},{"x":1,"y":-3},{"x":1,"y":-2},{"x":1,"y":-1},{"x":0,"y":-1},{"x":0,"y":0},{"x":0,"y":1},{"x":0,"y":2},{"x":0,"y":3},{"x":0,"y":4},{"x":0,"y":5},{"x":0,"y":6},{"x":1,"y":6},{"x":1,"y":5},{"x":2,"y":5},{"x":2,"y":4},{"x":2,"y":3},{"x":2,"y":2},{"x":2,"y":1}]},{"id":"0-5","forwardSteps":25,"steps":[{"x":2,"y":1},{"x":2,"y":2},{"x":2,"y":3},{"x":2,"y":4},{"x":2,"y":5},{"x":1,"y":5},{"x":1,"y":6},{"x":0,"y":6},{"x":0,"y":5},{"x":0,"y":4},{"x":0,"y":3},{"x":0,"y":2},{"x":0,"y":1},{"x":0,"y":0},{"x":0,"y":-1},{"x":1,"y":-1},{"x":1,"y":-2},{"x":1,"y":-3},{"x":1,"y":-4},{"x":2,"y":-4},{"x":2,"y":-3},{"x":2,"y":-2},{"x":2,"y":-1},{"x":3,"y":-1},{"x":3,"y":0},{"x":3,"y":1},{"x":3,"y":0},{"x":3,"y":-1},{"x":2,"y":-1},{"x":2,"y":-2},{"x":2,"y":-3},{"x":2,"y":-4},{"x":1,"y":-4},{"x":1,"y":-3},{"x":1,"y":-2},{"x":1,"y":-1},{"x":0,"y":-1},{"x":0,"y":0},{"x":0,"y":1},{"x":0,"y":2},{"x":0,"y":3},{"x":0,"y":4},{"x":0,"y":5},{"x":0,"y":6},{"x":1,"y":6},{"x":1,"y":5},{"x":2,"y":5},{"x":2,"y":4},{"x":2,"y":3},{"x":2,"y":2},{"x":2,"y":1}]},{"id":"0-6","forwardSteps":26,"steps":[{"x":2,"y":1},{"x":2,"y":2},{"x":2,"y":3},{"x":2,"y":4},{"x":2,"y":5},{"x":1,"y":5},{"x":1,"y":6},{"x":0,"y":6},{"x":0,"y":5},{"x":0,"y":4},{"x":0,"y":3},{"x":0,"y":2},{"x":0,"y":1},{"x":0,"y":0},{"x":0,"y":-1},{"x":1,"y":-1},{"x":1,"y":-2},{"x":1,"y":-3},{"x":1,"y":-4},{"x":2,"y":-4},{"x":2,"y":-3},{"x":2,"y":-2},{"x":2,"y":-1},{"x":3,"y":-1},{"x":3,"y":0},{"x":3,"y":1},{"x":3,"y":2},{"x":3,"y":1},{"x":3,"y":0},{"x":3,"y":-1},{"x":2,"y":-1},{"x":2,"y":-2},{"x":2,"y":-3},{"x":2,"y":-4},{"x":1,"y":-4},{"x":1,"y":-3},{"x":1,"y":-2},{"x":1,"y":-1},{"x":0,"y":-1},{"x":0,"y":0},{"x":0,"y":1},{"x":0,"y":2},{"x":0,"y":3},{"x":0,"y":4},{"x":0,"y":5},{"x":0,"y":6},{"x":1,"y":6},{"x":1,"y":5},{"x":2,"y":5},{"x":2,"y":4},{"x":2,"y":3},{"x":2,"y":2},{"x":2,"y":1}]},{"id":"0-8","forwardSteps":24,"steps":[{"x":2,"y":1},{"x":2,"y":2},{"x":2,"y":3},{"x":2,"y":4},{"x":2,"y":5},{"x":1,"y":5},{"x":1,"y":6},{"x":0,"y":6},{"x":0,"y":5},{"x":0,"y":4},{"x":0,"y":3},{"x":0,"y":2},{"x":0,"y":1},{"x":0,"y":0},{"x":0,"y":-1},{"x":1,"y":-1},{"x":1,"y":-2},{"x":1,"y":-3},{"x":1,"y":-4},{"x":2,"y":-4},{"x":2,"y":-3},{"x":2,"y":-2},{"x":2,"y":-1},{"x":3,"y":-1},{"x":3,"y":0},{"x":3,"y":-1},{"x":2,"y":-1},{"x":2,"y":-2},{"x":2,"y":-3},{"x":2,"y":-4},{"x":1,"y":-4},{"x":1,"y":-3},{"x":1,"y":-2},{"x":1,"y":-1},{"x":0,"y":-1},{"x":0,"y":0},{"x":0,"y":1},{"x":0,"y":2},{"x":0,"y":3},{"x":0,"y":4},{"x":0,"y":5},{"x":0,"y":6},{"x":1,"y":6},{"x":1,"y":5},{"x":2,"y":5},{"x":2,"y":4},{"x":2,"y":3},{"x":2,"y":2},{"x":2,"y":1}]},{"id":"1-0","forwardSteps":18,"steps":[{"x":0,"y":2},{"x":0,"y":3},{"x":0,"y":4},{"x":0,"y":5},{"x":0,"y":6},{"x":-1,"y":6},{"x":-1,"y":7},{"x":-2,"y":7},{"x":-2,"y":6},{"x":-2,"y":5},{"x":-2,"y":4},{"x":-2,"y":3},{"x":-2,"y":2},{"x":-2,"y":1},{"x":-2,"y":0},{"x":-1,"y":0},{"x":-1,"y":-1},{"x":-1,"y":-2},{"x":-2,"y":-2},{"x":-1,"y":-2},{"x":-1,"y":-1},{"x":-1,"y":0},{"x":-2,"y":0},{"x":-2,"y":1},{"x":-2,"y":2},{"x":-2,"y":3},{"x":-2,"y":4},{"x":-2,"y":5},{"x":-2,"y":6},{"x":-2,"y":7},{"x":-1,"y":7},{"x":-1,"y":6},{"x":0,"y":6},{"x":0,"y":5},{"x":0,"y":4},{"x":0,"y":3},{"x":0,"y":2}]},{"id":"2-3","forwardSteps":19,"steps":[{"x":2,"y":5},{"x":2,"y":6},{"x":2,"y":7},{"x":2,"y":8},{"x":2,"y":9},{"x":1,"y":9},{"x":1,"y":10},{"x":0,"y":10},{"x":0,"y":9},{"x":0,"y":8},{"x":0,"y":7},{"x":0,"y":6},{"x":0,"y":5},{"x":0,"y":4},{"x":0,"y":3},{"x":1,"y":3},{"x":1,"y":2},{"x":1,"y":1},{"x":1,"y":0},{"x":2,"y":0},{"x":1,"y":0},{"x":1,"y":1},{"x":1,"y":2},{"x":1,"y":3},{"x":0,"y":3},{"x":0,"y":4},{"x":0,"y":5},{"x":0,"y":6},{"x":0,"y":7},{"x":0,"y":8},{"x":0,"y":9},{"x":0,"y":10},{"x":1,"y":10},{"x":1,"y":9},{"x":2,"y":9},{"x":2,"y":8},{"x":2,"y":7},{"x":2,"y":6},{"x":2,"y":5}]},{"id":"2-4","forwardSteps":19,"steps":[{"x":2,"y":5},{"x":2,"y":6},{"x":2,"y":7},{"x":2,"y":8},{"x":2,"y":9},{"x":1,"y":9},{"x":1,"y":10},{"x":0,"y":10},{"x":0,"y":9},{"x":0,"y":8},{"x":0,"y":7},{"x":0,"y":6},{"x":0,"y":5},{"x":0,"y":4},{"x":0,"y":3},{"x":1,"y":3},{"x":1,"y":2},{"x":1,"y":1},{"x":1,"y":0},{"x":0,"y":0},{"x":1,"y":0},{"x":1,"y":1},{"x":1,"y":2},{"x":1,"y":3},{"x":0,"y":3},{"x":0,"y":4},{"x":0,"y":5},{"x":0,"y":6},{"x":0,"y":7},{"x":0,"y":8},{"x":0,"y":9},{"x":0,"y":10},{"x":1,"y":10},{"x":1,"y":9},{"x":2,"y":9},{"x":2,"y":8},{"x":2,"y":7},{"x":2,"y":6},{"x":2,"y":5}]},{"id":"2-7","forwardSteps":3,"steps":[{"x":2,"y":5},{"x":2,"y":6},{"x":2,"y":7},{"x":2,"y":8},{"x":2,"y":7},{"x":2,"y":6},{"x":2,"y":5}]}];
let currentRoute = null;
let currentStep = 0;
let isPlaying = false;
let interval = null;
let speed = 800;

function resetGrid() {
    document.querySelectorAll('.cell').forEach(c => {
        c.classList.remove('truck', 'path-forward', 'path-return');
        const type = c.dataset.type;
        if (type) c.classList.add(type);
    });
    document.querySelectorAll('.path-line').forEach(l => l.remove());
}

function getCell(x, y) {
    return document.querySelector(`.cell[data-x="${x}"][data-y="${y}"]`);
}

function drawLine(from, to, isReturn) {
    const svg = document.querySelector('.edge-overlay');
    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
    line.setAttribute('x1', from.x * 62 + 31);
    line.setAttribute('y1', from.y * 62 + 31);
    line.setAttribute('x2', to.x * 62 + 31);
    line.setAttribute('y2', to.y * 62 + 31);
    line.classList.add('path-line', isReturn ? 'path-return' : 'path-forward');
    svg.appendChild(line);
}

function showStep() {
    if (!currentRoute || currentStep >= currentRoute.steps.length) {
        stop();
        return;
    }

    const step = currentRoute.steps[currentStep];
    const cell = getCell(step.x, step.y);
    if (cell) {
        cell.classList.add('truck');
        const icon = cell.querySelector('i') || document.createElement('i');
        icon.className = 'fas fa-truck';
        if (!cell.querySelector('i')) cell.appendChild(icon);
    }

    if (currentStep > 0) {
        const prev = currentRoute.steps[currentStep - 1];
        const isReturn = currentStep > currentRoute.forwardSteps;
        drawLine(prev, step, isReturn);
    }

    currentStep++;
}

function play() {
    if (isPlaying || !currentRoute) return;
    isPlaying = true;
    document.getElementById('playBtn').style.display = 'none';
    document.getElementById('pauseBtn').style.display = 'inline-block';
    interval = setInterval(showStep, speed);
}

function stop() {
    isPlaying = false;
    clearInterval(interval);
    document.getElementById('playBtn').style.display = 'inline-block';
    document.getElementById('pauseBtn').style.display = 'none';
}

function reset() {
    stop();
    currentStep = 0;
    resetGrid();
    currentRoute = null;
    document.querySelectorAll('.path-btn').forEach(b => b.classList.remove('selected'));
}

// Button listeners
document.getElementById('nextBtn').addEventListener('click', () => currentRoute && showStep());
document.getElementById('playBtn').addEventListener('click', play);
document.getElementById('pauseBtn').addEventListener('click', stop);
document.getElementById('resetBtn').addEventListener('click', reset);
document.getElementById('speedSlider').addEventListener('input', (e) => {
    speed = parseInt(e.target.value);
    document.getElementById('speedValue').textContent = speed + 'ms';
    if (isPlaying) { stop(); play(); }
});

// Path selection
document.querySelectorAll('.path-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        reset();
        const id = btn.dataset.routeId;
        currentRoute = routes.find(r => r.id === id);
        if (currentRoute) {
            document.querySelectorAll('.path-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            showStep();
        }
    });
});

setTimeout(() => document.querySelector('.path-btn')?.click(), 500);

    </script>
</body>
</html>
